<div class="container mt-4">

  <h2 class="mb-4">Food Menu</h2>

  <form #menuForm="ngForm" (ngSubmit)="saveMenu()" class="row g-3 mb-4">
    <div class="col-md-4">
      <input
        type="text"
        class="form-control"
        placeholder="Name"
        [(ngModel)]="menu.name"
        name="name"
        #nameCtrl="ngModel"
        required
      />
      <small class="text-danger" *ngIf="nameCtrl.invalid && nameCtrl.touched">
        Name is required
      </small>
    </div>

    <div class="col-md-4">
      <input
        type="text"
        class="form-control"
        placeholder="Description"
        [(ngModel)]="menu.description"
        name="description"
        #descCtrl="ngModel"
        required
      />
      <small class="text-danger" *ngIf="descCtrl.invalid && descCtrl.touched">
        Description is required
      </small>
    </div>

    <div class="col-md-2">
      <input
        type="number"
        class="form-control"
        placeholder="Price"
        [(ngModel)]="menu.price"
        name="price"
        #priceCtrl="ngModel"
        required
        min="0.01"
      />
      <small class="text-danger" *ngIf="priceCtrl.invalid && priceCtrl.touched">
        Price must be greater than 0
      </small>
    </div>

    <div class="col-md-2 d-flex gap-2">
      <button class="btn btn-primary" type="submit" [disabled]="menuForm.invalid">
        {{ isEdit ? 'Update' : 'Add' }}
      </button>

      <button
        class="btn btn-secondary"
        type="button"
        (click)="resetForm()"
        *ngIf="isEdit"
      >
        Cancel
      </button>
    </div>
  </form>

  <table class="table table-bordered table-striped">
    <thead class="table-dark">
      <tr>
        <th>Name</th>
        <th>Description</th>
        <th>Price</th>
        <th style="width: 160px">Actions</th>
      </tr>
    </thead>

    <tbody>
      <tr *ngFor="let m of menus">
        <td>{{ m.name }}</td>
        <td>{{ m.description }}</td>
        <td>{{ m.price | currency }}</td>
        <td>
          <button
            class="btn btn-sm btn-warning me-2"
            (click)="editMenu(m)"
          >
            Edit
          </button>

          <button
            class="btn btn-sm btn-danger"
            (click)="deleteMenu(m.id)"
          >
            Delete
          </button>
        </td>
      </tr>
    </tbody>
  </table>

</div>
